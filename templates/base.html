<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8" />
    <title>ã‚¹ãƒãƒ¼ãƒˆå¨æˆ¿ KDS ã‚·ã‚¹ãƒ†ãƒ </title>
    <link href="{{ url_for('static', filename='tailwind.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='style.css') }}" rel="stylesheet">
</head>

<body class="font-sans">
    <div class="flex min-h-screen">
        <!-- å·¦ä¾§èœå• -->
        <nav class="sidebar flex flex-col p-4">
            <h2 class="text-xl font-bold mb-4">ğŸ‘¨â€ğŸ³ å¨æˆ¿ KDS</h2>
            <a href="/" class="{% if request.path == '/' %}active{% endif %}">ãƒ›ãƒ¼ãƒ </a>
            <a href="/totals" class="{% if request.path == '/totals' %}active{% endif %}">çµ±è¨ˆ</a>
            <a href="/foods" class="{% if request.path == '/orders' %}active{% endif %}">é£Ÿå“ç®¡ç†</a>
            <a href="/chefs" class="{% if request.path == '/head_chef' %}active{% endif %}">æ–™ç†é•·</a>
            <!-- <a href="settings.html">è¨­å®š</a> -->
        </nav>

        <!-- ä¸»ä½“éƒ¨åˆ†ï¼ˆå·¦ä¾§èœå• + å†…å®¹ï¼‰ -->
        <div class="flex flex-1 flex-col">
            <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
            <header class="fixed top-0 left-56 right-0 flex items-center justify-between p-4 shadow z-50">
                <div class="flex items-center gap-3">
                    <div class="bg-blue-600 p-2 rounded-lg">ğŸ‘¨â€ğŸ³</div>
                    <h1 class="text-2xl font-bold">ã‚¹ãƒãƒ¼ãƒˆå¨æˆ¿ KDS ã‚·ã‚¹ãƒ†ãƒ </h1>
                </div>

                <div class="relative">
                    <button id="userMenuButton" class="flex items-center space-x-2 rounded-lg px-3 py-1">
                        <img src="{{ url_for('static', filename='user.png') }}" alt="User" class="w-8 h-8 rounded-full">
                        <span>{{ session.get('nickname', 'æœªç™»å½•') }}</span>
                        <svg class="w-4 h-4 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                        </svg>
                    </button>

                    <div id="userDropdown"
                        class="hidden absolute right-0 mt-2 w-40 bg-white border rounded-lg shadow-lg z-50">
                        <a href="/settings" class="block px-4 py-2 text-red-600 hover:bg-gray-100">è¨­å®š</a>
                        <hr>
                        <a href="/logout" class="block px-4 py-2 text-red-600 hover:bg-red-50">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</a>
                    </div>
                </div>
            </header>

            <!-- ä¸»ä½“å†…å®¹ -->
            <main class="flex-1 p-6 mt-16">
                {% block content %}{% endblock %}
            </main>
        </div>

        {% block model %}{% endblock %}

        <script src="{{ url_for('static', filename='jquery-3.6.0.min.js') }}"></script>
        <script src="{{ url_for('static', filename='sweetalert2@11.js') }}"></script>
        <script src="{{ url_for('static', filename='index.js') }}"></script>
        {% block js %}{% endblock %}
        <script>
            $(document).ready(function () {
                $('#userMenuButton').on('click', function () {
                    $('#userDropdown').toggleClass('hidden');
                });

                // ç‚¹å‡»å¤–éƒ¨åŒºåŸŸå…³é—­èœå•
                $(document).on('click', function (e) {
                    if (!$(e.target).closest('#userMenuButton, #userDropdown').length) {
                        $('#userDropdown').addClass('hidden');
                    }
                });
            });

        </script>
</body>

</html>