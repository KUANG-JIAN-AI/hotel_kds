{% extends "base.html" %}

{% block content %}

<div class="flex justify-between items-center mb-6">
    <h1 class="text-3xl font-bold">ğŸ± æ¯æ—¥ã®é£Ÿå“</h1>
</div>

<div class="overflow-x-auto">
    <!-- ğŸ” æ¤œç´¢æ¬„ -->
    <div class="flex justify-between items-center mb-4">
        <!-- <h2 class="text-xl font-semibold text-slate-200">ğŸ± é£Ÿå“ä¸€è¦§</h2> -->
        <form class="space-y-4" action="/days" method="POST">
            <div class="relative bg-slate-800 p-2 rounded-lg">
                <input name="keyword" type="text" placeholder="åç§°ã§æ¤œç´¢..." value="{{ keyword or '' }}"
                    class="pl-4 pr-4 py-2 rounded-lg placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:bg-slate-600 shadow-sm transition duration-200"
                    style="background-color: #334155; color: #f1f5f9;">
                <!-- æ—¥ä»˜æ¤œç´¢ -->
                <input name="date" type="date" value="{{ date or '' }}"
                    class="pl-4 pr-4 py-2 rounded-lg bg-slate-700 text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-yellow-400 transition duration-200"
                    style="background-color: #334155; color: #f1f5f9;">
                <button type="submit" class="bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded-lg">
                    æ¤œç´¢
                </button>
            </div>
        </form>
    </div>

    <table id="food-table" class="min-w-full bg-slate-800 rounded-lg shadow-lg">
        <thead>
            <tr>
                <th class="text-left text-slate-200">ID</th>
                <th class="text-left text-slate-200">åç§°</th>
                <th class="text-left text-slate-200">ç·é‡é‡</th>
                <th class="text-left text-slate-200">æ—¥ä»˜</th>
            </tr>
        </thead>
        <tbody>
            {% for food in foods %}
            <tr id="food-row-{{ food.id }}">
                <td class="text-slate-100">{{ food.id }}</td>
                <td class="text-slate-100">{{ food.food.name }}</td>
                <td class="text-slate-100">{{ food.total_weight }}</td>
                <td class="text-slate-100">{{ food.record_date }}</td>
            </tr>
            {% else %}
            <tr>
                <td colspan="4" class="text-slate-400 text-center">è¡¨ç¤ºå¯èƒ½ãªãƒ‡ãƒ¼ã‚¿ã¯ã‚ã‚Šã¾ã›ã‚“</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <div id="pagination-area">
        <!-- ğŸŒŸ ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³ -->
        {% if pagination.pages >= 1 %}
        <nav class="flex justify-center items-center mt-6 space-x-2">
            <!-- å‰ã®ãƒšãƒ¼ã‚¸ -->
            {% if pagination.has_prev %}
            <a href="{{ url_for('days', page=pagination.prev_num, keyword=keyword, date=date) }}"
                class="px-3 py-1 rounded-lg bg-slate-700 text-slate-200 hover:bg-slate-600 transition">Â«</a>
            {% else %}
            <span class="px-3 py-1 rounded-lg bg-slate-900 text-slate-600 cursor-not-allowed">Â«</span>
            {% endif %}

            <!-- ãƒšãƒ¼ã‚¸ç•ªå· -->
            {% for p in pagination.iter_pages(left_edge=1, right_edge=1, left_current=2, right_current=2) %}
            {% if p %}
            {% if p == pagination.page %}
            <span class="px-3 py-1 rounded-lg bg-yellow-500 text-white font-semibold shadow">{{ p }}</span>
            {% else %}
            <a href="{{ url_for('days', page=p, keyword=keyword, date=date) }}"
                class="px-3 py-1 rounded-lg bg-slate-700 text-slate-200 hover:bg-slate-600 transition">{{ p }}</a>
            {% endif %}
            {% else %}
            <span class="px-2 text-slate-500">â€¦</span>
            {% endif %}
            {% endfor %}

            <!-- æ¬¡ã®ãƒšãƒ¼ã‚¸ -->
            {% if pagination.has_next %}
            <a href="{{ url_for('days', page=pagination.next_num, keyword=keyword, date=date) }}"
                class="px-3 py-1 rounded-lg bg-slate-700 text-slate-200 hover:bg-slate-600 transition">Â»</a>
            {% else %}
            <span class="px-3 py-1 rounded-lg bg-slate-900 text-slate-600 cursor-not-allowed">Â»</span>
            {% endif %}
        </nav>
        {% endif %}
    </div>
</div>

{% endblock %}

{% block js %}
<script>
</script>
{% endblock %}